CREATE DATABASE IF NOT EXISTS BDESTACIONAMENTO;
USE BDESTACIONAMENTO;

CREATE TABLE IF NOT EXISTS TBCATEGORIA (
    idcat INT PRIMARY KEY AUTO_INCREMENT,
    PRECO_PRIMEIRA_HORA DECIMAL(10, 2) NOT NULL,
    PRECO_HORAS_ADICIONAIS DECIMAL(10, 2) NOT NULL,
    PRECO_DIARIA DECIMAL(10, 2) NOT NULL
);

INSERT INTO TBCATEGORIA (PRECO_PRIMEIRA_HORA, PRECO_HORAS_ADICIONAIS, PRECO_DIARIA)
VALUES (10.00, 5.00, 50.00);

CREATE TABLE IF NOT EXISTS TBCLIENTE (
    idcliente INT PRIMARY KEY AUTO_INCREMENT,
    nomecliente VARCHAR(100) NOT NULL,
    telefonecliente VARCHAR(20) NOT NULL,
    cpfcliente VARCHAR(14) NOT NULL UNIQUE
);

INSERT INTO TBCLIENTE (nomecliente, telefonecliente, cpfcliente) VALUES
('Lucas Ferreira', '(11) 98234-7150', '835.325.758-58'),
('Ana Beatriz Ramos', '(21) 99780-4432', '657.509.220-12'),
('Thiago Monteiro', '(31) 98562-1094', '536.916.749-01'),
('Mariana Duarte', '(41) 98873-5501', '024.899.145-44'),
('Rafael Cardoso', '(48) 99612-7740', '225.634.469-96'),
('Camila Araújo', '(62) 98455-3208', '430.366.325-34'),
('Pedro Nascimento', '(71) 98904-6612', '756.129.334-68'),
('Sofia Martins', '(85) 98733-9405', '596.436.235-25'),
('Gabriel Almeida', '(98) 99218-5079', '454.274.112-79');

CREATE TABLE IF NOT EXISTS TBFUNCIONARIO (
    idfunci INT PRIMARY KEY AUTO_INCREMENT,
    senhafunci VARCHAR(80) NOT NULL,
    telefonefunci VARCHAR(20) NOT NULL,
    emailfunci VARCHAR(100) NOT NULL,
    nomefunci VARCHAR(100) NOT NULL,
    cpffunci VARCHAR(14) NOT NULL UNIQUE,
    statusfunci VARCHAR(10) NOT NULL,
    datacontfunci VARCHAR(10)
);

INSERT INTO TBFUNCIONARIO (senhafunci, telefonefunci, emailfunci, nomefunci, cpffunci, statusfunci) VALUES
('Carol11', '(13) 24318-5853', 'carolalmeida@gmail.com', 'Carolina Almeida Barbosa', '440.984.373-76', 'ATIVO'),
('Ana12', '(81) 74117-5612', 'annaaraujo@gmail.com', 'Anna Araujo Ferreira', '165.001.792-85', 'ATIVO'),
('Joana14', '(69) 74117-5612', 'joanabanana@gmail.com', 'Joana Silva Banana', '167.069.792-69', 'INATIVO'),
('Kaua13', '(41) 85469-3091', 'kauamelo@gmail.com', 'Kaua Melo Ribeiro', '840.936.057-18', 'ATIVO');

CREATE TABLE IF NOT EXISTS TBVEICULO (
    idveiculo INT PRIMARY KEY AUTO_INCREMENT,
    placaveiculo VARCHAR(10) NOT NULL UNIQUE,
    modeloveiculo VARCHAR(50) NOT NULL,
    tipoveiculo VARCHAR(20) NOT NULL,
    codcliente INT NOT NULL,
    FOREIGN KEY (codcliente) REFERENCES TBCLIENTE(idcliente)
);

INSERT INTO TBVEICULO (CODCLIENTE,PLACAVEICULO,MODELOVEICULO,TIPOVEICULO) VALUES
(1,'BFX-4281','HONDA CIVIC','MÉDIO'),
(2,'GEJ-1526','HONDA','PEQUENO'),
(3,'DFJ-2236','VOLKSWAGEN','GRANDE'),
(4,'CYT-5860','VOLKSWAGEN','MÉDIO'),
(5,'EAY-0834','COROLLA','MÉDIO'),
(6,'EDO-7198','FIAT','MÉDIO'),
(7,'DON-6272','YAMAHA','PEQUENO'),
(8,'DBW-7759','NISSAN','MÉDIO'),
(9,'BUN-3878','HONDA','PEQUENO'),
(9,'CRS-8695','HYUNDAI','MÉDIO');

CREATE TABLE IF NOT EXISTS TBSERVICO (
    idservico INT PRIMARY KEY AUTO_INCREMENT,
    datafinal VARCHAR(10),
    datainicial VARCHAR(10) NOT NULL,
    horaentrada VARCHAR(8) NOT NULL,
    horasaida VARCHAR(8),
    CODCAT INT NOT NULL,
    codfunci_entrada INT NOT NULL,
    codfunci_saida INT,
    codveiculo INT NOT NULL,
    valortotal DECIMAL (10,2),
    STATUSSERVICO VARCHAR (15),
    FOREIGN KEY (CODCAT) REFERENCES TBCATEGORIA (IDCAT) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (CODFUNCI_ENTRADA) REFERENCES TBFUNCIONARIO (IDFUNCI) ON DELETE CASCADE ON UPDATE CASCADE,
	 FOREIGN KEY (CODFUNCI_SAIDA) REFERENCES TBFUNCIONARIO (IDFUNCI) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (codveiculo) REFERENCES TBVEICULO(idveiculo) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO TBSERVICO (datainicial, datafinal, horaentrada, horasaida, codcat, codfunci_entrada, codfunci_saida, codveiculo, statusservico) VALUES
('2025-08-29', '2025-08-29', '13:39:50', '22:08:30', 1, 1, 1, 1,"FINALIZADO"),
('2025-08-30', '2025-08-30', '10:08:32', '13:39:50', 1, 2, 2, 2,"FINALIZADO"),
('2025-08-31', '2025-08-31', '09:12:12', '09:35:47', 1, 3, 3, 3,"FINALIZADO"),
('2025-09-03', '2025-09-03', '08:03:05', '17:30:36', 1, 1, 1, 4,"FINALIZADO"),
('2025-09-03', '2025-09-03', '19:47:51', '23:39:17', 1, 2, 2, 5,"FINALIZADO"),
('2025-09-03', '2025-09-03', '15:51:21', '20:40:34', 1, 3, 3, 6,"FINALIZADO"),
('2025-09-03', '2025-09-03', '07:59:41', '13:12:08', 1, 1, 1, 7,"FINALIZADO"),
('2025-09-03', '2025-09-03', '08:47:06', '17:14:21', 1, 2, 2, 8,"FINALIZADO"),
('2025-09-03', '2025-09-04', '23:03:05', '00:04:57', 1, 3, 3, 9,"FINALIZADO"),
('2025-09-04', '2025-09-05', '17:59:17', '10:08:32', 1, 2, 1, 10,"FINALIZADO");
