CREATE DATABASE IF NOT EXISTS BDESTACIONAMENTO;
USE BDESTACIONAMENTO;

CREATE TABLE IF NOT EXISTS TBCATEGORIA (
    idcat INT PRIMARY KEY AUTO_INCREMENT,
    PRECO_PRIMEIRA_HORA DECIMAL(10, 2) NOT NULL,
    PRECO_HORAS_ADICIONAIS DECIMAL(10, 2) NOT NULL,
    PRECO_DIARIA DECIMAL(10, 2) NOT NULL
);

INSERT INTO TBCATEGORIA (PRECO_PRIMEIRA_HORA, PRECO_HORAS_ADICIONAIS, PRECO_DIARIA)
VALUES (10.00, 5.00, 50.00);

CREATE TABLE IF NOT EXISTS TBCLIENTE (
    idcliente INT PRIMARY KEY AUTO_INCREMENT,
    nomecliente VARCHAR(100) NOT NULL,
    telefonecliente VARCHAR(20) NOT NULL,
    cpfcliente VARCHAR(14) NOT NULL UNIQUE
);

INSERT INTO TBCLIENTE (nomecliente, telefonecliente, cpfcliente) VALUES
('Cliente 1', '11987654321', '111.111.111-11'),
('Cliente 2', '11987654322', '222.222.222-22'),
('Cliente 3', '11987654323', '333.333.333-33'),
('Cliente 4', '444.444.444-44', '444.444.444-44'),
('Cliente 5', '555.555.555-55', '555.555.555-55'),
('Cliente 6', '666.666.666-66', '666.666.666-66'),
('Cliente 7', '777.777.777-77', '777.777.777-77'),
('Cliente 8', '888.888.888-88', '888.888.888-88'),
('Cliente 9', '999.999.999-99', '999.999.999-99');

CREATE TABLE IF NOT EXISTS TBFUNCIONARIO (
    idfunci INT PRIMARY KEY AUTO_INCREMENT,
    senhafunci VARCHAR(80) NOT NULL,
    telefonefunci VARCHAR(20) NOT NULL,
    emailfunci VARCHAR(100) NOT NULL,
    nomefunci VARCHAR(100) NOT NULL,
    cpffunci VARCHAR(14) NOT NULL UNIQUE,
    statusfunci VARCHAR(10) NOT NULL,
    datacontfunci VARCHAR(10)
);

INSERT INTO TBFUNCIONARIO (senhafunci, telefonefunci, emailfunci, nomefunci, cpffunci, statusfunci) VALUES
('Carol11', '13 2418-5853', 'CAROLALMEIDA@GMAIL.COM', 'CAROLINA ALMEIDA BARBOSA', '440.984.373-76', 'ATIVO'),
('Ana12', '81 7417-5612', 'ANNAARAUJO@GMAIL.COM', 'ANNA ARAUJO FERREIRA', '165.001.792-85', 'ATIVO'),
('Kaua13', '41 8569-3091', 'KAUAMELO@GMAIL.COM', 'KAUA MELO RIBEIRO', '840.936.057-85', 'ATIVO');

CREATE TABLE IF NOT EXISTS TBVEICULO (
    idveiculo INT PRIMARY KEY AUTO_INCREMENT,
    placaveiculo VARCHAR(10) NOT NULL UNIQUE,
    modeloveiculo VARCHAR(50) NOT NULL,
    tipoveiculo VARCHAR(20) NOT NULL,
    codcliente INT NOT NULL,
    FOREIGN KEY (codcliente) REFERENCES TBCLIENTE(idcliente)
);

INSERT INTO TBVEICULO (CODCLIENTE,PLACAVEICULO,MODELOVEICULO,TIPOVEICULO) VALUES
(1,'BFX4281','HONDA CIVIC','MÉDIO'),
(2,'GEJ1526','HONDA','PEQUENO'),
(3,'DFJ2236','VOLKSWAGEN','GRANDE'),
(4,'CYT5860','VOLKSWAGEN','MÉDIO'),
(5,'EAY0834','COROLLA','MÉDIO'),
(6,'EDO7198','FIAT','MÉDIO'),
(7,'DON6272','YAMAHA','PEQUENO'),
(8,'DBW7759','NISSAN','MÉDIO'),
(9,'BUN3878','HONDA','PEQUENO'),
(9,'CRS8695','HYUNDAI','MÉDIO');

CREATE TABLE IF NOT EXISTS TBSERVICO (
    idservico INT PRIMARY KEY AUTO_INCREMENT,
    datafinal VARCHAR(10),
    datainicial VARCHAR(10) NOT NULL,
    horaentrada VARCHAR(8) NOT NULL,
    horasaida VARCHAR(8),
    CODCAT INT NOT NULL,
    codfunci_entrada INT NOT NULL,
    codfunci_saida INT,
    codveiculo INT NOT NULL,
    valortotal DECIMAL (10,2),
    STATUSSERVICO VARCHAR (15),
    FOREIGN KEY (CODCAT) REFERENCES TBCATEGORIA (IDCAT) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (CODFUNCI_ENTRADA) REFERENCES TBFUNCIONARIO (IDFUNCI) ON DELETE CASCADE ON UPDATE CASCADE,
	 FOREIGN KEY (CODFUNCI_SAIDA) REFERENCES TBFUNCIONARIO (IDFUNCI) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (codveiculo) REFERENCES TBVEICULO(idveiculo) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO TBSERVICO (datainicial, datafinal, horaentrada, horasaida, codcat, codfunci_entrada, codfunci_saida, codveiculo, statusservico) VALUES
('2025-08-29', '2025-08-29', '13:39:50', '22:08:30', 1, 1, 1, 1,"FINALIZADO"),
('2025-08-30', '2025-08-30', '10:08:32', '13:39:50', 1, 2, 2, 2,"FINALIZADO"),
('2025-08-31', '2025-08-31', '09:12:12', '09:35:47', 1, 3, 3, 3,"FINALIZADO"),
('2025-09-03', '2025-09-03', '08:03:05', '17:30:36', 1, 1, 1, 4,"FINALIZADO"),
('2025-09-03', '2025-09-03', '19:47:51', '23:39:17', 1, 2, 2, 5,"FINALIZADO"),
('2025-09-03', '2025-09-03', '15:51:21', '20:40:34', 1, 3, 3, 6,"FINALIZADO"),
('2025-09-03', '2025-09-03', '07:59:41', '13:12:08', 1, 1, 1, 7,"FINALIZADO"),
('2025-09-03', '2025-09-03', '08:47:06', '17:14:21', 1, 2, 2, 8,"FINALIZADO"),
('2025-09-03', '2025-09-04', '23:03:05', '00:04:57', 1, 3, 3, 9,"FINALIZADO"),
('2025-09-04', '2025-09-05', '17:59:17', '10:08:32', 1, 2, 1, 10,"FINALIZADO");
